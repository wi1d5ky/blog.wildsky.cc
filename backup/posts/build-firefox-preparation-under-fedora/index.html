<!doctype html> <html prefix='og: http://ogp.me/ns#'> <head> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50389098-1', 'auto');
  ga('send', 'pageview');
</script> <meta name=viewport content="width=device-width, initial-scale=1"> <meta charset=utf-8 /> <meta name=title content="Preparation for building Firefox under Fedora | ws://wildsky.cc"/> <meta name=description content="Today, I want to build Firefox myself. So I found this post: Simple Firefox build, and there is a..."/> <meta property="og:type" content=article /> <meta property="og:site_name" content="Preparation for building Firefox under Fedora"/> <meta property="og:locale" content=zh_TW /> <meta property="og:url" content="http://blog.wildsky.cc/posts/build-firefox-preparation-under-fedora/"/> <meta property="og:image" content="http://blog.wildsky.cc/images/wildsky_main_pic.jpg"/> <meta property="og:title" content="Preparation for building Firefox under Fedora | ws://wildsky.cc"/> <meta property="og:description" content="Today, I want to build Firefox myself. So I found this post: Simple Firefox build, and there is a..."/> <meta property="fb:app_id" content=1521058658143315 /> <meta property='article:author' content='https://www.facebook.com/wi1d5ky'/> <meta name="twitter:card" content=summary /> <meta name="twitter:site" content="@wildskyf"/> <meta name="twitter:title" content="Preparation for building Firefox under Fedora | ws://wildsky.cc"/> <meta name="twitter:description" content="Today, I want to build Firefox myself. So I found this post: Simple Firefox build, and there is a..."/> <meta name="twitter:image" content="http://blog.wildsky.cc/images/wildsky_main_pic.jpg"/> <title> Preparation for building Firefox under Fedora | ws://wildsky.cc </title> <link rel="shortcut icon" type="image/png" href="/favicon.png"/> <link rel=stylesheet href="/style.css" media=bogus> <link rel=stylesheet href="/syntax.css" media=bogus> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <script>
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://wildsky.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script> </head> <body> <div class=container> <div id=site-header> <nav> <ul> <li><a href="/about/">About</a></li> <li><a href="/fedora/">Fedora</a></li> <li><a href="/subscribe/">Subscribe</a></li> <li><a href="/search/">Search</a></li> </ul> </nav> <header> <div class=site-title><a href="/">ws://wildsky.cc</a></div> <p class=slogan>風吹過什麼樣的地方，身上自然而然就會有那樣的氣息。</p> </header> </div> <div id=main role=main> <article> <div class=content> <h1>Preparation for building Firefox under Fedora</h1> <p>Today, I want to build Firefox myself. So I found this post: <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Simple_Firefox_build">Simple Firefox build</a>, and there is a link, which could help me setup the prerequisites. The link is <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Simple_Firefox_build/Linux_and_MacOS_build_preparation">Linux Build Prerequisites</a>. But when I followed the instruction and input this command:</p> <p><code>wget -q https://hg.mozilla.org/mozilla-central/raw-file/default/python/mozboot/bin/bootstrap.py -O bootstrap.py &amp;&amp; python bootstrap.py</code></p> <p>Something weird happened!! It sayed that:</p> <div class=highlight><pre class="highlight shell"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class=rouge-code><pre>Your version of Mercurial <span class="o">(</span>3.5.1<span class="o">)</span> is not modern enough.
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"bootstrap.py"</span>, line 159, <span class="k">in</span> &lt;module&gt;
    sys.exit<span class="o">(</span>main<span class="o">(</span>sys.argv<span class="o">))</span>
  File <span class="s2">"bootstrap.py"</span>, line 150, <span class="k">in </span>main
    dasboot.bootstrap<span class="o">()</span>
  File <span class="s2">"/tmp/tmpTdL9Pv/mozboot/bootstrap.py"</span>, line 137, <span class="k">in </span>bootstrap

  File <span class="s2">"/tmp/tmpTdL9Pv/mozboot/base.py"</span>, line 316, <span class="k">in </span>ensure_mercurial_modern
TypeError: upgrade_mercurial<span class="o">()</span> takes exactly 1 argument <span class="o">(</span>2 given<span class="o">)</span>

</pre></td></tr></tbody></table></code></pre></div> <p>But no matter how many times I give <code>sudo dnf update -y</code> to my Terminal, it kept tell me that:</p> <div class=highlight><pre class="highlight plaintext"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class=rouge-code><pre>Last metadata expiration check performed 0:14:52 ago on Tue Mar  1 22:23:25 2016.
Dependencies resolved.
Nothing to do.
Complete!
</pre></td></tr></tbody></table></code></pre></div> <p>So my Mercurial should be up-to-date.</p> <p>But I found that the offical website of Mercurial shows the lastest version of Mercurial is 3.7.1, and mine is 3.5.1!</p> <p>I found a copr, which provide newer version of Mercurial: <a href="http://copr-fe.cloud.fedoraproject.org/coprs/nbecker/mercurial-3/packages/">nbecker/mercurial-3</a>, and try this:</p> <p><code>sudo dnf copr enable nbecker/mercurial-3 &amp;&amp; sudo dnf update</code></p> <p>now I have 3.2.1 &hellip;. though this is not the really newest version of Mercurial, it won&rsquo;t get wrong when I give <code>wget -q https://hg.mozilla.org/mozilla-central/raw-file/default/python/mozboot/bin/bootstrap.py -O bootstrap.py &amp;&amp; python bootstrap.py</code> to my Terminal!</p> <p>I don&rsquo;t know why it is fixed up, but it allow me to move on, so I think it&rsquo;s a solution for people who use Fedora &amp; want to build Firefox but face the not-new-enough-version problem.</p> <p>Good luck!</p> </div> </article> <div class=switch> <div class=pre> <a href="/posts/2016-1-4-diary/">《 上一頁</a> </div> ☺ <div class=next> <a href="/posts/concat-two-mp4-files/">下一頁 》</a> </div> </div> <div id=disqus_thread></div> <noscript>請啟用 JavaScript 以便開啟 <a href="https://disqus.com/?ref_noscript" rel=nofollow>Disqus</a> 的留言功能！</noscript> </div> </div> <footer> <a href="http://github.com/wildskyf">wildsky</a> <form action="https://www.paypal.com/cgi-bin/webscr" method=post target=_top class=footer-item> <input type=hidden name=cmd value=_s-xclick> <input type=hidden name=hosted_button_id value=92X2FP2T63MTN> <input type=submit border=0 name=submit value=Donate> <img alt="" border=0 src="https://www.paypalobjects.com/zh_TW/i/scr/pixel.gif" width=1 height=1> </form> </footer> <link rel=stylesheet href="/style.css"> <link rel=stylesheet href="/syntax.css"> </body> </html>